{
  "schema_version": "1.1",
  "type_definitions": [
    {
      "type": "user"
    },
    {
      "type": "organization",
      "relations": {
        "owner": {
          "this": {}
        },
        "admin": {
          "this": {}
        },
        "member": {
          "this": {}
        },
        "viewer": {
          "this": {}
        },
        "can_create_domain": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "owner"}},
              {"computedUserset": {"relation": "admin"}}
            ]
          }
        },
        "can_manage_secrets": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "owner"}},
              {"computedUserset": {"relation": "admin"}}
            ]
          }
        },
        "can_read": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "viewer"}},
              {"computedUserset": {"relation": "member"}},
              {"computedUserset": {"relation": "admin"}},
              {"computedUserset": {"relation": "owner"}}
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "owner": {"directly_related_user_types": [{"type": "user"}]},
          "admin": {"directly_related_user_types": [{"type": "user"}]},
          "member": {"directly_related_user_types": [{"type": "user"}]},
          "viewer": {"directly_related_user_types": [{"type": "user"}]}
        }
      }
    },
    {
      "type": "domain",
      "relations": {
        "parent_org": {
          "this": {}
        },
        "owner": {
          "this": {}
        },
        "editor": {
          "this": {}
        },
        "viewer": {
          "this": {}
        },
        "can_create_agent": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "owner"}},
              {"computedUserset": {"relation": "editor"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_org"},
                  "computedUserset": {"relation": "admin"}
                }
              }
            ]
          }
        },
        "can_read": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "viewer"}},
              {"computedUserset": {"relation": "editor"}},
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_org"},
                  "computedUserset": {"relation": "member"}
                }
              }
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "parent_org": {"directly_related_user_types": [{"type": "organization"}]},
          "owner": {"directly_related_user_types": [{"type": "user"}]},
          "editor": {"directly_related_user_types": [{"type": "user"}]},
          "viewer": {"directly_related_user_types": [{"type": "user"}]}
        }
      }
    },
    {
      "type": "agent",
      "relations": {
        "parent_domain": {
          "this": {}
        },
        "owner": {
          "this": {}
        },
        "executor": {
          "this": {}
        },
        "editor": {
          "this": {}
        },
        "viewer": {
          "this": {}
        },
        "can_execute": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "executor"}},
              {"computedUserset": {"relation": "editor"}},
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_domain"},
                  "computedUserset": {"relation": "editor"}
                }
              }
            ]
          }
        },
        "can_read": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "viewer"}},
              {"computedUserset": {"relation": "executor"}},
              {"computedUserset": {"relation": "editor"}},
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_domain"},
                  "computedUserset": {"relation": "viewer"}
                }
              }
            ]
          }
        },
        "can_update": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "editor"}},
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_domain"},
                  "computedUserset": {"relation": "editor"}
                }
              }
            ]
          }
        },
        "can_delete": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_domain"},
                  "computedUserset": {"relation": "owner"}
                }
              }
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "parent_domain": {"directly_related_user_types": [{"type": "domain"}]},
          "owner": {"directly_related_user_types": [{"type": "user"}]},
          "executor": {"directly_related_user_types": [{"type": "user"}]},
          "editor": {"directly_related_user_types": [{"type": "user"}]},
          "viewer": {"directly_related_user_types": [{"type": "user"}]}
        }
      }
    },
    {
      "type": "secret",
      "relations": {
        "parent_org": {
          "this": {}
        },
        "owner": {
          "this": {}
        },
        "viewer": {
          "this": {}
        },
        "can_read_status": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "viewer"}},
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_org"},
                  "computedUserset": {"relation": "member"}
                }
              }
            ]
          }
        },
        "can_update": {
          "union": {
            "child": [
              {"computedUserset": {"relation": "owner"}},
              {
                "tupleToUserset": {
                  "tupleset": {"relation": "parent_org"},
                  "computedUserset": {"relation": "admin"}
                }
              }
            ]
          }
        }
      },
      "metadata": {
        "relations": {
          "parent_org": {"directly_related_user_types": [{"type": "organization"}]},
          "owner": {"directly_related_user_types": [{"type": "user"}]},
          "viewer": {"directly_related_user_types": [{"type": "user"}]}
        }
      }
    }
  ]
}
